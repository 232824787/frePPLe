{% extends "admin/base_site_nav.html" %}
{% load i18n admin_list adminmedia %}
{% block extrahead %}{{ block.super }}
{% for js in javascript_imports %}<script type="text/javascript" src="{{js}}"></script>
{% endfor %}
<script type="text/javascript">
		ContextMenu.setup();
		ContextMenu.attach('demand', 'demandcontext');
		ContextMenu.attach('operation', 'operationcontext');
		ContextMenu.attach('forecast', 'forecastcontext');
</script>
{% endblock %}
{% block stylesheet %}{% admin_media_prefix %}css/changelists.css{% endblock %}
{% block coltype %}colM{% endblock %}
{% block tools %}<div class="tools">
<a href="{% addurlparameter type csv %}" title="Export as CSV"><img src="/static/csv.png"/></a>
</div>{% endblock %}
{% block content %}
<div id="content-main">

<div id="demandcontext" class="ContextMenu">
{% if perms.input.change_demand %}<a id="/admin/input/demand/%s/">Demand</a>{% endif %}
<a id="/pegging/?demand=%s/">Pegging</a>
</div>

<div id="forecastcontext" class="ContextMenu">
{% if perms.input.change_forecast %}<a id="/admin/input/forecast/%s/">Forecast</a>{% endif %}
<a id="/pegging/?demand=%s/">Pegging</a>
<a id="/forecast/%s/">Edit values</a>
</div>

<div id="operationcontext" class="ContextMenu">
{% if perms.input.change_operation %}<a id="/admin/input/operation/%s/">Operation</a>{% endif %}
<a id="/supplypath/operation/%s/">Supply Path</a>
<a id="/whereused/operation/%s/">Where Used</a>
<a id="/operation/%s/">Plan</a>
</div>

<div style="overflow-x: scroll; overflow-y: auto;">
<table>
<thead><tr>{{ rowheader }}</tr></thead>

<tbody>{% for i in objectlist %}
<tr class="{% cycle row1,row2 %}">

<td>{{i.identifier}}</td>
<td>{% if i.fcst_or_actual %}{{i.demand|superlink:"forecast"}}{% else %}{{i.demand|superlink:"demand"}}{% endif %}</td>
<td>{{i.operation|superlink:"operation"}}</td>
<td>{{i.quantity}}</td>
<td>{{i.startdatetime}}</td>
<td>{{i.enddatetime}}</td>
<td>{{i.locked}}</td>
<td>{{i.owner}}</td>

</tr>{% endfor %}
</tbody></table>
</div>

{% block pagination %}<p class="paginator">
{% if is_paginated %}
{% for x in page_htmls %} {{x}} {% endfor %}
{% endif %}
&nbsp;&nbsp;{{hits}} operation plans {% ifnotequal hits fullhits %} (total <a class="showall" href="/operationplan/">{{fullhits}}</a>){% endifnotequal %}
{% endblock %}</p></div>

{% endblock %}
