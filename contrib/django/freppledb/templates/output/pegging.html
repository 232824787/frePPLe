{% extends "admin/base_site_grid.html" %}
{% load i18n %}

{% block extrahead %}{{ block.super }}
<script type="text/javascript" src="/static/FusionCharts.js"></script>
{% endblock %}

{% block contextmenus %}
{% include "operationcontext.html" %}
{% include "itemcontext.html" %}
{% include "buffercontext.html" %}
{% include "demandcontext.html" %}
{% include "resourcecontext.html" %}
{% endblock %}

{% block tools %}<div class="tools">
<form><input style="display:none; font-weight:bold; padding-top:3px; padding-bottom:3px;" type="button" id="save" value="{% trans 'Save' %}" onclick="upload.save();"/>
<input style="display:none; font-weight:bold; padding-top:3px; padding-bottom:3px; margin-right: 10px; margin-left:10px;" type="button" id="undo" value="{% trans 'Undo' %}" onclick="upload.undo();"/>
<a href="javascript:bucket_show();" id="bucketconfig"><img src="/media/img/admin/icon_clock.gif"/>{% trans 'Time' %}</a>
<a href="javascript:export_show(true);" id="csvexport"><img src="/static/csv.png"/>{% trans 'Export' %}</a>
</form><div id="popup"></div></div>
<div id="timebuckets">
<h2>{% trans 'Time buckets' %}</h2><br/>
<form method="get" action=""><table>
<tr><th>{% trans 'Bucket' %}</th><td><select name="reportbucket" id="reportbucket">
{% for i in bucketnames %}<option value="{{i}}"{% ifequal i reportbucket %} selected="selected"{% endifequal %}>{% trans i %}</option>
{% endfor %}</select></td></tr>
<tr><th>{% trans 'start date'|capfirst %}:</th><td><input id="reportstart" type="text" size="10" class="vDateField" value="{{ reportstart|date:"Y-m-d" }}" name="reportstart"/></td></tr>
<tr><th>{% trans 'end date'|capfirst %}:</th><td><input id="reportend" type="text" size="10" class="vDateField" value="{{ reportend|date:"Y-m-d" }}" name="reportend" /></td></tr>
<tr><td><input type="button" value="{% trans 'OK' %}" onclick="javascript:bucket_close(false,'{{reportbucket}}','{{reportstart|date:"Y-m-d"}}','{{reportend|date:"Y-m-d"}}');"/></td>
<td><input type="button" value="{% trans 'Cancel' %}" onclick="javascript:bucket_close(true);"/></td></tr>
</table></form>
</div>
{% endblock %}

{% block before_table %}
<div id="chart1div" style="z-index: 1000;">
	  <p>&nbsp;</p>
	  <p>{% blocktrans %}frePPLe needs Adobe Flash Player to display graphs. If you're unable to see 
	  the chart here, it means that your browser does not seem to have the Flash Player 
	  installed.<br/>
	  You can downloaded it <a href="http://www.adobe.com/products/flashplayer/" target="_blank"><u>here</u></a> for free.{% endblocktrans %}</p>
	</div>
	<script language="javascript" type="text/javascript">
	   var totalAvailable = document.viewport.getDimensions();
	   var chart1 = new FusionCharts("/static/FCF_Gantt.swf", "sampleChart", totalAvailable.width-35, 500);
	   chart1.setTransparent();
	   chart1.setDataURL(escape("{{request.prefix}}/pegginggraph/{{ object }}/"));
	   chart1.render("chart1div");
	</script>
{% endblock %}

{% block data %}
{% for i in objectlist1 %}<tr class="{% cycle row1,row2 %}">
<td>{{i.depth}}</td>
<td>{% if i.hidden %}{{i.operation}}{% else %}{% superlink i.operation operation %}{% endif %}</td>
<td>{% superlink i.buffer buffer %}</td>
<td>{% superlink i.item item %}</td>
<td>{% for j in i.resource %}{% superlink j resource %}<br/>{% endfor %}</td>
<td>{{i.startdate}}</td>
<td>{{i.enddate}}</td>
<td>{{i.quantity}}</td>
<td>{{i.percent_used|floatformat:1}}</td>
</tr>{% endfor %}
{% endblock %}

{% block pagination %}<p class="paginator">
{{paginator_html}}&nbsp;&nbsp;{{hits}} {% if reportclass.model %}{{ reportclass.model|verbose_name_plural }} {% endif %}
{% endblock %}