{% extends "admin/base_site_table.html" %}
{% load i18n %}

{% block contextmenus %}
{% include "operationcontext.html" %}
{% include "locationcontext.html" %}
<div id="detailcontext" class="ContextMenu">
<a id="{{request.prefix}}/operationplan/%s">{% trans 'Detail' %}</a>
<a id="{{request.prefix}}/operationpegging/%s">{% trans 'Pegging' %}</a>
</div>
{% endblock %}

{% block before_table %}
{% ifequal hits 1 %}<div id="chart1div" style="z-index: 1000;">
	  <p>&nbsp;</p>
	  <p>{% blocktrans %}frePPLe needs Adobe Flash Player to display graphs. If you're unable to see 
	  the chart here, it means that your browser does not seem to have the Flash Player 
	  installed.<br/>
	  You can downloaded it <a href="http://www.adobe.com/products/flashplayer/" target="_blank"><u>here</u></a> for free.{% endblocktrans %}</p>
	</div>
	<script language="javascript" type="text/javascript">
	   var totalAvailable = document.viewport.getDimensions();
	   var chart1 = new FusionCharts("/static/FCF_MSColumn2D.swf", "sampleChart", totalAvailable.width-35, 350);
	   chart1.setTransparent();
	   chart1.setDataURL(escape("{{request.prefix}}/operationgraph/{{object}}/?reportbucket={{reportbucket}}&reportstart={{reportstart}}&reportend={{reportend}}"));	   	   
	   chart1.render("chart1div");
	</script>
{% endifequal %}{% endblock %}

{% block frozendata %}{% for j in objectlist1 %}
<tr class="{% cycle row1,row2 %}">
<td>{% superlink j.name operation %}</td>
<td>{% superlink j.location location %}</td>
<td>{{ crossheader }}</td>
</tr>{% endfor %}{% endblock %}

{% block data %}
{% for j in objectlist2 %}
{% ifchanged j.operation %}{% if not forloop.first %}</tr>{% endif %}
<tr class="{% cycle row1,row2 %}">
{% endifchanged %}
<td>{% if j.locked_start %}<a href="?operation={{j.operation|urlencode}}&amp;startdate__gte={{j.startdate|date:"Y-m-d"}}&amp;startdate__lt={{j.enddate|date:"Y-m-d"}}&amp;locked=1" class="detail">{{j.locked_start|floatformat:2}}</a>{% else %}{{0|floatformat:2}}{% endif %}<br/>
{% if j.total_start %}<a href="?operation={{j.operation|urlencode}}&amp;startdate__gte={{j.startdate|date:"Y-m-d"}}&amp;startdate__lt={{j.enddate|date:"Y-m-d"}}" class="detail">{{j.total_start|floatformat:2}}</a>{% else %}{{0|floatformat:2}}{% endif %}<br/>
{% if j.locked_end %}<a href="?operation={{j.operation|urlencode}}&amp;enddate__gte={{j.startdate|date:"Y-m-d"}}&amp;enddate__lt={{j.enddate|date:"Y-m-d"}}&amp;locked=1" class="detail">{{j.locked_end|floatformat:2}}</a>{% else %}{{0|floatformat:2}}{% endif %}<br/>
{% if j.total_end %}<a href="?operation={{j.operation|urlencode}}&amp;enddate__gte={{j.startdate|date:"Y-m-d"}}&amp;enddate__lt={{j.enddate|date:"Y-m-d"}}" class="detail">{{j.total_end|floatformat:2}}</a>{% else %}{{0|floatformat:2}}{% endif %}</td>
{% if forloop.last %}</tr>{% endif %}{% endfor %}
{% endblock %}

{% block pagination %}{% ifnotequal hits 1 %}{{ block.super }}{% endifnotequal %}{% endblock %}
