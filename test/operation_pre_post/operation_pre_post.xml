<?xml version="1.0" encoding="UTF-8" ?>
<PLAN xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NAME>Test model for effective operations</NAME>
  <DESCRIPTION>
    This test verifies the behavior of pre-operation and post-operation delays.
    These are as delay times before and after an operation, which the solver tries
    to respect but can violate if required.
    Post-operation time:
      Case 1: Lead time constraints forcing the violation of the post-operation time when required.
      Case 2: Same as 1, but with time_per operation instead.
      Case 3: Material constraint forcing the violation of the post-operation time
      Case 4: Leadtime constraints and post-operation times on multiple levels.
              The most upstream post-operation times are the first ones to be reduced.
  </DESCRIPTION>
  <CURRENT>2007-01-01T00:00:00</CURRENT>
  <COMMANDS>
    <VERBOSE>true</VERBOSE>
    <COMMAND xsi:type="COMMAND_SOLVE">
      <VERBOSE>false</VERBOSE>
      <SOLVER NAME="MRP" xsi:type="SOLVER_MRP" CONSTRAINTS="7" LOGLEVEL="2" />
    </COMMAND>
    <COMMAND xsi:type="COMMAND_SAVEPLAN">
      <FILENAME>output.1.xml</FILENAME>
    </COMMAND>
  </COMMANDS>

  <!--
    Case 1: Leadtime constraints on a fixed-time operation.
  -->
  <BUFFERS>
    <BUFFER NAME="1. item">
      <ITEM NAME="1. item" />
      <PRODUCING NAME="1. make item" xsi:type="OPERATION_FIXED_TIME"
        DURATION="168:00:00" POSTTIME="168:00:00">
        <FLOWS>
          <FLOW xsi:type="FLOW_END">
            <BUFFER NAME="1. item" />
            <QUANTITY>1</QUANTITY>
          </FLOW>
        </FLOWS>
      </PRODUCING>
    </BUFFER>
  </BUFFERS>
  <ITEMS>
    <ITEM NAME="1. item">
      <OPERATION NAME="1. Deliver item">
        <FLOWS>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="1. item" />
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </OPERATION>
    </ITEM>
  </ITEMS>
  <DEMANDS>
    <DEMAND NAME="1. order 1">
      <DESCRIPTION>Delivery is late, and post-operation time is 0 to reduce lateness.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-05T00:00:00</DUE>
      <PRIORITY>11</PRIORITY>
      <ITEM NAME="1. item" />
    </DEMAND>
    <DEMAND NAME="1. order 2">
      <DESCRIPTION>Delivery is on time, but post-operation time had to be shrunk.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-10T00:00:00</DUE>
      <PRIORITY>12</PRIORITY>
      <ITEM NAME="1. item" />
    </DEMAND>
    <DEMAND NAME="1. order 3">
      <DESCRIPTION>Delivery is on time and fully respecting post-operation time.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-31T00:00:00</DUE>
      <PRIORITY>13</PRIORITY>
      <ITEM NAME="1. item" />
    </DEMAND>
  </DEMANDS>

  <!--
    Case 2: Leadtime constraints on a time-per operation.
  -->
  <BUFFERS>
    <BUFFER NAME="2. item">
      <ITEM NAME="2. item" />
      <PRODUCING NAME="2. make item" xsi:type="OPERATION_TIME_PER"
        DURATION="24:00:00" DURATION_PER="24:00:00" POSTTIME="168:00:00">
        <FLOWS>
          <FLOW xsi:type="FLOW_END">
            <BUFFER NAME="2. item" />
            <QUANTITY>1</QUANTITY>
          </FLOW>
        </FLOWS>
      </PRODUCING>
    </BUFFER>
  </BUFFERS>
  <ITEMS>
    <ITEM NAME="2. item">
      <OPERATION NAME="2. Deliver item">
        <FLOWS>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="2. item" />
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </OPERATION>
    </ITEM>
  </ITEMS>
  <DEMANDS>
    <DEMAND NAME="2. order 1">
      <DESCRIPTION>Delivery is on time, by creating 2 parallel operations.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-05T00:00:00</DUE>
      <PRIORITY>11</PRIORITY>
      <ITEM NAME="2. item" />
    </DEMAND>
    <DEMAND NAME="2. order 2">
      <DESCRIPTION>Delivery is on time, but post-operation time had to be shrunk.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-10T00:00:00</DUE>
      <PRIORITY>12</PRIORITY>
      <ITEM NAME="2. item" />
    </DEMAND>
    <DEMAND NAME="2. order 3">
      <DESCRIPTION>Delivery is on time.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-31T00:00:00</DUE>
      <PRIORITY>13</PRIORITY>
      <ITEM NAME="2. item" />
    </DEMAND>
  </DEMANDS>

  <!--
    Case 3: Upstream material constraint.
  -->
  <BUFFERS>
    <BUFFER NAME="3. item">
      <ITEM NAME="3. item" />
      <PRODUCING NAME="3. make item" xsi:type="OPERATION_FIXED_TIME"
        DURATION="168:00:00" POSTTIME="168:00:00">
			<!--
      <PRODUCING NAME="3. make item" xsi:type="OPERATION_TIME_PER"
        DURATION="24:00:00" DURATION_PER="24:00:00" POSTTIME="168:00:00">
      -->
        <FLOWS>
          <FLOW xsi:type="FLOW_END">
            <BUFFER NAME="3. item" />
            <QUANTITY>1</QUANTITY>
          </FLOW>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="3. raw material" ONHAND="10"/>
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </PRODUCING>
    </BUFFER>
  </BUFFERS>
  <ITEMS>
    <ITEM NAME="3. item">
      <OPERATION NAME="3. Deliver item">
        <FLOWS>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="3. item" />
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </OPERATION>
    </ITEM>
  </ITEMS>
  <OPERATIONS>
  	<OPERATION NAME="3. supply raw material">
  		<FLOWS>
        <FLOW xsi:type="FLOW_END">
          <BUFFER NAME="3. raw material"/>
          <QUANTITY>1</QUANTITY>
        </FLOW>
  		</FLOWS>
  	</OPERATION>
  </OPERATIONS>
	<OPERATION_PLANS>
	  <OPERATION_PLAN ID="1001" OPERATION="3. supply raw material">
	    <END>2007-01-11T00:00:00</END>
	    <QUANTITY>5</QUANTITY>
	    <LOCKED>true</LOCKED>
	  </OPERATION_PLAN>
	</OPERATION_PLANS>
  <DEMANDS>
    <DEMAND NAME="3. order 1">
      <DESCRIPTION>Delivery is late, and post-operation time is 0 to reduce lateness.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-05T00:00:00</DUE>
      <PRIORITY>11</PRIORITY>
      <ITEM NAME="3. item" />
    </DEMAND>
    <DEMAND NAME="3. order 2">
      <DESCRIPTION>Delivery is on time, but post-operation time had to be shrunk.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-10T00:00:00</DUE>
      <PRIORITY>12</PRIORITY>
      <ITEM NAME="3. item" />
    </DEMAND>
    <DEMAND NAME="3. order 3">
      <DESCRIPTION>Delivery is on time.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-31T00:00:00</DUE>
      <PRIORITY>13</PRIORITY>
      <ITEM NAME="3. item" />
    </DEMAND>
  </DEMANDS>

  <!--
    Case 4: Fixed time operations on multiple levels. Each level has post-operation time
    specified. Leadtime constraints delay the demand.
  -->
  <BUFFERS>
    <BUFFER NAME="4. item level 1">
      <ITEM NAME="4. item" />
      <PRODUCING NAME="4. make item level 1" xsi:type="OPERATION_FIXED_TIME"
        DURATION="168:00:00" POSTTIME="168:00:00">
        <FLOWS>
          <FLOW xsi:type="FLOW_END">
            <BUFFER NAME="4. item level 1" />
            <QUANTITY>1</QUANTITY>
          </FLOW>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="4. item level 2" />
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </PRODUCING>
    </BUFFER>
    <BUFFER NAME="4. item level 2">
      <ITEM NAME="4. item" />
      <PRODUCING NAME="4. make item level 2" xsi:type="OPERATION_FIXED_TIME"
        DURATION="168:00:00" POSTTIME="168:00:00">
        <FLOWS>
          <FLOW xsi:type="FLOW_END">
            <BUFFER NAME="4. item level 2" />
            <QUANTITY>1</QUANTITY>
          </FLOW>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="4. item level 3" />
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </PRODUCING>
    </BUFFER>
    <BUFFER NAME="4. item level 3">
      <ITEM NAME="4. item" />
      <PRODUCING NAME="4. make item level 3" xsi:type="OPERATION_FIXED_TIME"
        DURATION="168:00:00" POSTTIME="168:00:00">
        <FLOWS>
          <FLOW xsi:type="FLOW_END">
            <BUFFER NAME="4. item level 3" />
            <QUANTITY>1</QUANTITY>
          </FLOW>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="4. item level 4" />
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </PRODUCING>
    </BUFFER>
    <BUFFER NAME="4. item level 4">
      <ITEM NAME="4. item" />
      <PRODUCING NAME="4. make item level 4" xsi:type="OPERATION_FIXED_TIME"
        DURATION="168:00:00" POSTTIME="168:00:00">
        <FLOWS>
          <FLOW xsi:type="FLOW_END">
            <BUFFER NAME="4. item level 4" />
            <QUANTITY>1</QUANTITY>
          </FLOW>
        </FLOWS>
      </PRODUCING>
    </BUFFER>
  </BUFFERS>
  <ITEMS>
    <ITEM NAME="4. item">
      <OPERATION NAME="4. Deliver item">
        <FLOWS>
          <FLOW xsi:type="FLOW_START">
            <BUFFER NAME="4. item level 1" />
            <QUANTITY>-1</QUANTITY>
          </FLOW>
        </FLOWS>
      </OPERATION>
    </ITEM>
  </ITEMS>
  <DEMANDS>
    <DEMAND NAME="4. order 1">
      <DESCRIPTION>Delivery is on time, by creating 2 parallel operations.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-01-05T00:00:00</DUE>
      <PRIORITY>11</PRIORITY>
      <ITEM NAME="4. item" />
    </DEMAND>
    <DEMAND NAME="4. order 2">
      <DESCRIPTION>Delivery is on time, but post-operation time had to be shrunk.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-02-01T00:00:00</DUE>
      <PRIORITY>12</PRIORITY>
      <ITEM NAME="4. item" />
    </DEMAND>
    <DEMAND NAME="4. order 3">
      <DESCRIPTION>Delivery is on time, but post-operation time had to be shrunk.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-02-08T00:00:00</DUE>
      <PRIORITY>13</PRIORITY>
      <ITEM NAME="4. item" />
    </DEMAND>
    <DEMAND NAME="4. order 4">
      <DESCRIPTION>Delivery is on time, but post-operation time had to be shrunk.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-02-16T00:00:00</DUE>
      <PRIORITY>14</PRIORITY>
      <ITEM NAME="4. item" />
    </DEMAND>
    <DEMAND NAME="4. order 5">
      <DESCRIPTION>Delivery is on time.</DESCRIPTION>
      <QUANTITY>6</QUANTITY>
      <DUE>2007-03-01T00:00:00</DUE>
      <PRIORITY>15</PRIORITY>
      <ITEM NAME="4. item" />
    </DEMAND>
  </DEMANDS>

</PLAN>
