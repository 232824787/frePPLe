<?xml version="1.0" encoding="UTF-8" ?>
<plan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <name>Test model for handling work in progress</name>
  <current>2014-01-01T00:00:00</current>
  <buffers>
    <buffer name="In1" xsi:type="buffer_procure">
      <item name="In1" />
      <location name="Loc"/>
    </buffer>
    <buffer name="In2" xsi:type="buffer_procure">
      <item name="In2" />
      <location name="Loc"/>
    </buffer>
    <buffer name="Out1">
      <item name="Out1" />
    </buffer>
    <buffer name="Out2">
      <item name="Out2" />
      <location name="Loc"/>
      <producing name="Oper1" xsi:type="operation_fixed_time" />
    </buffer>
  </buffers>
  <resources>
    <resource name="Res1">
       <location name="Loc"/>
    </resource>
    <resource name="Res1">
       <location name="Loc"/>
    </resource>
  </resources>
  <operations>
    <operation name="Oper1" xsi:type="operation_fixed_time">
      <loads>
        <load>
          <resource name="Res1" />
        </load>
        <load>
          <resource name="Res2" />
        </load>
      </loads>
      <flows>
        <flow xsi:type="flow_end">
          <buffer name="Out1" />
          <quantity>1</quantity>
        </flow>
        <flow xsi:type="flow_end">
          <buffer name="Out2" />
          <quantity>2</quantity>
        </flow>
        <flow xsi:type="flow_start">
          <buffer name="In1" />
          <quantity>-1</quantity>
        </flow>
        <flow xsi:type="flow_start">
          <buffer name="In2" />
          <quantity>-2</quantity>
        </flow>
      </flows>
      <duration>P10D</duration>
    </operation>
  </operations>
  <operationplans>
    <operationplan id="2001" operation="Oper1" quantity="10" start="2013-12-31T00:00:00" end="2014-01-05T00:00:00" locked="true" consume_material="false" />
    <operationplan id="2002" operation="Oper1" quantity="10" start="2013-02-01T00:00:00" end="2014-02-05T00:00:00" locked="true" produce_material="false" />
    <operationplan id="2003" operation="Oper1" quantity="10" start="2013-03-01T00:00:00" end="2014-03-05T00:00:00" locked="true" consume_capacity="false" />
    <operationplan id="2004" operation="Oper1" quantity="10" start="2013-04-01T00:00:00" end="2014-04-05T00:00:00" locked="true" consume_material="false" consume_capacity="false" produce_material="false" />
  </operationplans>
  
<?python
from __future__ import print_function
print("CREATING CONSTRAINED PLAN")
frepple.solver_mrp(name="MRP", plantype=1, constraints=15, loglevel=2).solve()
frepple.saveplan("output.1.xml")
print("CREATING UNCONSTRAINED PLAN")
frepple.solver_mrp(name="MRP", plantype=2, constraints=15, loglevel=2).solve()
frepple.saveplan("output.2.xml")
print("SAVING TO XML FILE")
frepple.saveXMLfile("output.3.xml")
?>

</plan>
