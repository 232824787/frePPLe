<?xml version="1.0" encoding="UTF-8" ?>
<plan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <name>Test model for effective operations</name>
  <description>
  This test verifies the logic used by calendars to select the bucket that
  is in effect on a certain day.
  To show the varying calendar value we apply the calendar to a resource which
  we then load completely.
  </description>
  <current>2007-01-01T00:00:00</current>
  <commands>
    <verbose>true</verbose>
    <command xsi:type="command_solve">
      <verbose>false</verbose>
      <solver name="MRP" xsi:type="solver_mrp" constraints="7" loglevel="2" />
    </command>
    <command xsi:type="command_saveplan">
      <filename>output.1.xml</filename>
    </command>
  </commands>

  <calendars>
    <calendar name="Capacity" xsi:type="calendar_double">
      <default>1</default>
      <buckets>
        <!-- From the infinite past till 2007-01-02 no entry is in effect.
             The default value is used -->
        <bucket start="2007-01-02T00:00:00" end="2007-01-06T00:00:00" value="2"/>
        <!-- This entry overrules the previous one: same priority, but later start date -->
        <bucket start="2007-01-03T00:00:00" end="2007-01-07T00:00:00" value="3"/>
        <!-- The next 2 entries overrule the previous one because of the priority.
             The second one has the lowest priority number. -->
        <bucket start="2007-01-04T00:00:00" end="2007-02-01T00:00:00" value="4" priority="-1"/>
        <bucket start="2007-01-04T00:00:00" end="2007-02-01T00:00:00" value="5" priority="-2"/>
        <!-- Between 2007-02-01 and 2007-03-03 no entry is in effect.
             The default value is used. -->
        <!-- From 2007-03-03 till the infinite future this entry rules. -->
        <bucket start="2007-03-03T00:00:00" value="6"/>
      </buckets>
    </calendar>
  </calendars>

  <items>
    <item name="end item">
      <operation name="delivery end item" xsi:type="operation_fixed_time">
        <duration>P0D</duration>
      </operation>
    </item>
  </items>
  <buffers>
    <buffer name="end item">
      <producing name="make end item" xsi:type="operation_time_per">
        <duration_per>P1D</duration_per>
      </producing>
      <item name="end item" />
    </buffer>
  </buffers>
  <resources>
    <resource name="Resource">
      <maximum name="Capacity"/>
      <loads>
        <load>
          <operation name="make end item" />
        </load>
      </loads>
    </resource>
  </resources>
  <flows>
    <flow xsi:type="flow_start">
      <operation name="delivery end item" />
      <buffer name="end item" />
      <quantity>-1</quantity>
    </flow>
    <flow xsi:type="flow_end">
      <operation name="make end item" />
      <buffer name="end item" />
      <quantity>1</quantity>
    </flow>
  </flows>
  <demands>
    <demand name="order 1">
      <quantity>100</quantity>
      <due>2007-01-01T00:00:00</due>
      <priority>1</priority>
      <item name="end item" />
    </demand>
  </demands>
</plan>
