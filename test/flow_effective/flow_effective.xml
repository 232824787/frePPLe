<?xml version="1.0" encoding="UTF-8" ?>
<plan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <name>Test model for effective operations</name>
  <description>
    xxx
  </description>
  <current>2007-01-01T00:00:00</current>
  <commands>
    <verbose>true</verbose>
    <command xsi:type="command_solve">
      <verbose>false</verbose>
      <solver name="MRP" xsi:type="solver_mrp" constraints="7" loglevel="2" />
    </command>
    <command xsi:type="command_saveplan">
      <filename>output.1.xml</filename>
    </command>
  </commands>

  <!--
    Case 1: Effectivity on the consuming flow of an operation
    In this example the flow is on a delivery operation, but it could be any
    operation.
    The scenario models a situation where an old product is being replaced
    by a new version of it.
    Note that in this case the effectivity dates should not overlap. In case
    they do, we would consume both the old and new product! If such an
    overlapping period is required, an alternate operation needs to be used.
  -->
  <buffers>
    <buffer name="1. end item - old version">
      <item name="1. end item - old version" />
      <producing name="1. make old end item" xsi:type="operation_fixed_time"
        duration="P1D">
        <flows>
          <flow xsi:type="flow_end">
            <buffer name="1. end item - old version" />
            <quantity>1</quantity>
          </flow>
        </flows>
      </producing>
    </buffer>
    <buffer name="1. end item - new version">
      <item name="1. end item - new version" />
      <producing name="1. make new end item" xsi:type="operation_fixed_time"
        duration="P1D">
        <flows>
          <flow xsi:type="flow_end">
            <buffer name="1. end item - new version" />
            <quantity>1</quantity>
          </flow>
        </flows>
      </producing>
    </buffer>
  </buffers>
  <operations>
    <operation name="1. deliver end item" xsi:type="operation_fixed_time"
      duration="P1D">
        <flows>
          <flow xsi:type="flow_start">
            <buffer name="1. end item - old version" />
            <EFFECTIVE_end>2007-02-01T00:00:00</EFFECTIVE_end>
            <quantity>-1</quantity>
          </flow>
          <flow xsi:type="flow_start">
            <buffer name="1. end item - new version" />
            <EFFECTIVE_start>2007-02-04T00:00:00</EFFECTIVE_start>
            <quantity>-1</quantity>
          </flow>
        </flows>
    </operation>
  </operations>
  <items>
    <item name="1. end item">
      <operation name="1. deliver end item" />
    </item>
  </items>
  <demands>
    <demand name="1. order 1">
      <quantity>10</quantity>
      <due>2007-01-20T00:00:00</due>
      <priority>11</priority>
      <item name="1. end item" />
    </demand>
    <demand name="1. order 2">
      <quantity>10</quantity>
      <due>2007-02-02T00:00:00</due>
      <priority>12</priority>
      <item name="1. end item" />
    </demand>
    <demand name="1. order 3">
      <quantity>10</quantity>
      <due>2007-02-20T00:00:00</due>
      <priority>13</priority>
      <item name="1. end item" />
    </demand>
  </demands>
</plan>
