<?xml version="1.0" encoding="UTF-8" ?>
<PLAN xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <NAME>Command Test</NAME>
  <DESCRIPTION>
    In this test conditional execution of commands is tested.
    The system commands used in this test are crafted such that they
    work both in *nix shells and windows command shell.
  </DESCRIPTION>
  <COMMANDS>
    <ABORTONERROR>false</ABORTONERROR>
    <VERBOSE>true</VERBOSE>
    <COMMAND xsi:type="COMMAND_SYSTEM" CMDLINE="echo START >output.1.xml" />

    <!-- Simple then-command -->
    <COMMAND xsi:type="COMMAND_IF">
      <CONDITION>true</CONDITION>
      <THEN xsi:type="COMMAND_SYSTEM"
        CMDLINE="echo TEST 1: Executing then-command >>output.1.xml" />
      <ELSE xsi:type="COMMAND_SYSTEM"
        CMDLINE="echo TEST 1: ERROR >>output.1.xml" />
    </COMMAND>

    <!-- Simple else-command -->
    <COMMAND xsi:type="COMMAND_IF">
      <CONDITION>false</CONDITION>
      <THEN xsi:type="COMMAND_SYSTEM"
        CMDLINE="echo TEST 2: ERROR >>output.1.xml" />
      <ELSE xsi:type="COMMAND_SYSTEM"
        CMDLINE="echo TEST 2: Executing else-command >>output.1.xml" />
    </COMMAND>

    <!-- Missing then command -->
    <COMMAND xsi:type="COMMAND_IF">
      <CONDITION>true</CONDITION>
      <ELSE xsi:type="COMMAND_SYSTEM"
        CMDLINE="echo TEST 3: ERROR >>output.1.xml" />
    </COMMAND>

    <!-- Missing else command -->
    <COMMAND xsi:type="COMMAND_IF">
      <CONDITION>false</CONDITION>
      <THEN xsi:type="COMMAND_SYSTEM"
        CMDLINE="echo TEST 4: ERROR >>output.1.xml" />
    </COMMAND>

    <!-- Error generated by then command -->
    <COMMAND xsi:type="COMMAND_IF">
      <CONDITION>true</CONDITION>
      <THEN xsi:type="COMMAND_SYSTEM"
        CMDLINE="echo TEST 5: failing command >>output.1.xml &amp;&amp; false" />
    </COMMAND>

    <COMMAND xsi:type="COMMAND_SYSTEM" CMDLINE="echo END >>output.1.xml" />
  </COMMANDS>
</PLAN>
