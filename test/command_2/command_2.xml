<?xml version="1.0" encoding="UTF-8" ?>
<plan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <name>command Test</name>
  <description>
    In this test conditional execution of commands is tested.
    The system commands used in this test are crafted such that they
    work both in *nix shells and windows command shell.
  </description>
  <commands>
    <abortonerror>false</abortonerror>
    <verbose>true</verbose>
    <command xsi:type="command_system" cmdline="echo START >output.1.xml" />

    <!-- Simple then-command -->
    <command xsi:type="command_if">
      <condition>true</condition>
      <then xsi:type="command_system"
        cmdline="echo TEST 1: Executing then-command >>output.1.xml" />
      <else xsi:type="command_system"
        cmdline="echo TEST 1: ERROR >>output.1.xml" />
    </command>

    <!-- Simple else-command -->
    <command xsi:type="command_if">
      <condition>false</condition>
      <then xsi:type="command_system"
        cmdline="echo TEST 2: ERROR >>output.1.xml" />
      <else xsi:type="command_system"
        cmdline="echo TEST 2: Executing else-command >>output.1.xml" />
    </command>

    <!-- Missing then command -->
    <command xsi:type="command_if">
      <condition>true</condition>
      <else xsi:type="command_system"
        cmdline="echo TEST 3: ERROR >>output.1.xml" />
    </command>

    <!-- Missing else command -->
    <command xsi:type="command_if">
      <condition>false</condition>
      <then xsi:type="command_system"
        cmdline="echo TEST 4: ERROR >>output.1.xml" />
    </command>

    <!-- Error generated by then command -->
    <command xsi:type="command_if">
      <condition>true</condition>
      <then xsi:type="command_system"
        cmdline="echo TEST 5: failing command >>output.1.xml &amp;&amp; false" />
    </command>

    <command xsi:type="command_system" cmdline="echo END >>output.1.xml" />
  </commands>
</plan>
